const mongoose = require('mongoose')
const Schema = mongoose.Schema
const schemaLugares = require('./schemaLugares')
const schemaUsuarios = require('./schemaUsuarios')

const ComentsSchema = new Schema({

    user: schemaUsuarios,
    lugar:schemaLugares,
    comentario: {
        type: String,
        required: true
    },
    data: {
        type: Date,
        default: Date.now
    },
},
{
    versionKey: false
})

const comentarioCollection = mongoose.model('comentario', ComentsSchema)

module.exports = comentarioCollection




Story.
  find({ author: author._id }).
  exec(function (err, stories) {
    if (err) return handleError(err);
    console.log('The stories are an array: ', stories);
  });




// antigo post comentarios
const postComent = (req, res) => {
    console.log(req.url)
    const comentBody = req.body

    const comentarioAdd = new comentarioCollection(comentBody)

    comentarioAdd.save((error) => {
        if (error) {
            return res.status(400).send({
                mensagem: "Erro ao avaliar, tente novamente", 
                error
            })
        }

        return res.status(200).send({
            mensagem: "Local avaliado com sucesso", 
            comentarioAdd
        })
    })

}